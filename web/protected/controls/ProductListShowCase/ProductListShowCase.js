var ProductListShowCaseJs=new Class.create();ProductListShowCaseJs.prototype=Object.extend(new FrontPageJs(),{pagination:{pageNo:1,pageSize:10},_langId:null,_callbackId:"",_wrapperId:"",fetch:function(b,c){var a={};a.me=this;a.me._callbackId=b;a.me._wrapperId=c;a.resultDiv=$(c).down(".list");a.me.postAjax(b,{pagnation:a.me.pagination,languageId:a.me._langId},{onLoading:function(){$(a.resultDiv).update(a.me._getLoadingDiv())},onComplete:function(d,g){a.listDiv=new Element("ul",{"class":"jcarousel jcarousel-skin-tango"});try{a.result=a.me.getResp(g,false,true);if(a.result.products.size()===0){throw"No product found!"}a.result.products.each(function(e){a.listDiv.insert({bottom:a.me._getProductThumbnail(e).wrap(new Element("li"))})});$(a.resultDiv).update(a.listDiv);jQuery("#"+c+" .list .jcarousel").jcarousel()}catch(f){$(a.resultDiv).update(f)}}});return this},_getLoadingDiv:function(){return new Element("span",{"class":"loading"}).insert({bottom:new Element("img",{src:"/themes/default/images/loading.gif"})}).insert({bottom:"Loading ..."})},changeLanguage:function(b){var a={};a.me=this;$(b).up(".langlist").getElementsBySelector("li.langitem").each(function(c){c.removeClassName("active")});a.me._langId=$(b).addClassName("active").readAttribute("langid").strip();this.fetch(a.me._callbackId,a.me._wrapperId);return this}});